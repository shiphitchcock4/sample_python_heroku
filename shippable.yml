language: python

python:
  - 3.4

env:
  global:
    - FOO=FUBU
    - APP_NAME=herokunew
    - secure: thZdP8JTo9Gcm+n+K2Yu+y2e1rka7IL/ISggbXAXpQQMWw0PIz33y+4hI10ScnUeGZ6VGuZ3xfuR/3t7PwBwrOGB7b6DStdvkGNfdHQVcVcSK0I/fLz92ArU+yMEXTsuMpuy5BQClkC9n/oZYB+QOIp9VYCKWrqSQK0keF9ObgUKY4OtwuM46+JvWp9EZLaPSU3wX5guk103VR4Le297LY4UofvQVxv//ofvvG/aX+2HrQ0Qmjhx3vQROftmoAKkkZar9GsFsd9G1bVUsxgAfeCTjbwoBpaAbB2Z4aOhZJs99e5g5Z3DEyiOB0FCzE4Eew3me2X3lLGYVURc86dkJw==

  matrix:
    - M1=ONE

build:
  pre_ci:
    - docker build -t=shippabledocker/hitchcock2_sample_python .

  pre_ci_boot:
    image_name: shippabledocker/hitchcock2_sample_python
    image_tag: latest
    pull: false
    options: '--privileged=true --net=bridge -e FOO=true -e BOO=false'

  ci:
    - ps -eax
    - ls -al
    - test -f ~/.ssh/id_rsa.heroku || ssh-keygen -y -f ~/.ssh/id_rsa > ~/.ssh/id_rsa.heroku && heroku keys:add ~/.ssh/id_rsa.heroku
    - git remote -v | grep ^heroku || heroku git:remote --ssh-git --app $APP_NAME
    - git push -f heroku master

  post_ci:
    - docker push shippabledocker/hitchcock2_sample_python


integrations:
  hub:
    - integrationName: ship-docker
      type: docker
      
   
